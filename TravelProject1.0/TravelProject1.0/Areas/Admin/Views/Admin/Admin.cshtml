@section Styles{
    <link href="~/css/planetk.css" rel="stylesheet" />
}
<div id="app">
    <div class="container">
        <br>
    </div>
    <!--頁首-->
    <header class="container-fluid row">
        <!--區塊-->
        <!--區塊-->
    </header>
    <!--頁首底-->
    <!--第一段-->
    <div class="container-fluid row  justify-content-between">
        <div class="col-2"></div>
        <button type="button" class="btn  solid col-1">統計</button>
        <br>
        <button type="button" class="btn solid  col-1">按週統計</button>
        <button type="button" class="btn solid  col-1">按月統計</button>
        <br>
        <button type="button" class="btn solid  col-1">時間</button>
        <div class="col-4"></div>
    </div>
    <!--第二段-->
    <nav class="navbar bg-body">
        <div class="container-fluid justify-content-end">
            <form class="d-flex" role="search">
                @*<img src="./pic/search.png" width="100" height="60">*@
                <!--輸入關鍵字-->
                <input class="form-control" type="text" placeholder="Search" aria-label="Search"
                    v-model="Filter"    @@keyup="filterUser">
                <button class="btn btn-outline-secondary " style="color :#1e2154" type="submit">
                    <Fieldset>搜尋</Fieldset>
                </button>
            </form>
        </div>
    </nav>
    <br>
    <!--第三段-->
    <div class="container-fluid row">
        <!--管理選單-->
        <div class="col-2">
            <ul class="list-group">
                <!--管理選單列-->
                <a class="btn" href="http://127.0.0.1:5500/admin.html">使用者管理</a>
                <a class="btn" href="http://127.0.0.1:5500/admin.html">訂單管理</a>
                <a class="btn" href="http://127.0.0.1:5500/admin.html">數據分析</a>
                <a class="btn" href="http://127.0.0.1:5500/admin.html">商品管理</a>
                <!--管理選單底-->
            </ul>
        </div>
        <!--顯示管理內容-->
        <div class="col-10">
            <table class="table table-bordered">
                <tr>
                    <td>ID</td>
                    <td>姓名</td>
                    <td>性別</td>
                    <td>地址</td>
                    <td>信箱</td>
                </tr>
                <tr v-for="item in AdminDTOes">
                    <template v-if="item.Edit==true">
                        <td>{{item.userId}}</td>
                        <td><input v-model="item.Name" /></td>
                        <td><input v-model="item.Gender" /></td>
                        <td><input v-model="item.Address" /></td>
                        <td><input v-model="item.Email" /></td>
                    </template>
                    <template v-else>
                        <td>{{item.userId}}</td>
                        <td>{{item.name}}</td>
                        <td>{{item.gender}}</td>
                        <td>{{item.address}}</td>
                        <td>{{item.email}}</td>
                    </template>
                </tr>
            </table>
        </div>
        <!--顯示更多內容-->
        <div class="col-10">
        </div>
</div>



@section Scripts{
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js" integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://unpkg.com/vue@next"></script>
    <script src="~/js/planetk.js"></script>
     <script>
     var baseAddress = "https://localhost:7025"


        var vueApp={
            data(){
                return{
                    AdminDTOes:[],
                        Filter:'',
                        Name:'',
                        Gender:'',
                        Address:'',
                        Email:'',
                };
            },
             mounted:function(){
                   let _this = this;
                    //alert("mount");
                    _this.filterUser();
            },
         methods:{
            filterUser: function () {
                        //alert("篩選");
                        let _this=this;
                        var request={};
                        request.UserId=isNaN(_this.filterUser)?-1:Number(_this.Filter);
                        request.Name = request.Address = request.Email;
                        axios.post(`${baseAddress}/api/Admin/AdminGET`, request)
                        .then(response=>{
                            _this.AdminDTOes=response.data;
                            for (var i = 0; i < _this.AdminDTOes.Length;i++){
                                var item = _this.AdminDTOes[i];
                                item.Edit=false;
                            }
                        })
                        .catch(err => {
                            alert(err);
                        });
                        
                 },
                edit:function(){
                         alert("edit");
                },
                deleteUser:function(){
                        alert("delete");
                }
            }
        };

            var app = Vue.createApp(vueApp).mount("#app");

    </script>










@*        <script>
            var baseAddress = "https://localhost:7025"

            function GetEmployees() {

                fetch(`${baseAddress}/api/Admin/AdminGET`, {
                    method:"GET"
                }).then(response=>{
                    return response.json();
                }).then(data =>{
                    alert(JSON.stringify(data));
                }).catch(err=>{
                    alert(err);
                })
            }
        </script>*@
}
